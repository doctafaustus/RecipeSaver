"use strict";var Fraction=function(a,b){if("undefined"!=typeof a&&b)("number"==typeof a||a instanceof Number)&&("number"==typeof b||b instanceof Number)?(this.numerator=a,this.denominator=b):("string"==typeof a||a instanceof String)&&("string"==typeof b||b instanceof String)&&(this.numerator=parseFloat(a.replace(",",".")),this.denominator=parseFloat(b.replace(",",".")));else if("undefined"==typeof b){var c=a;if(c instanceof Fraction)this.numerator=c.numerator,this.denominator=c.denominator;else if("number"==typeof c||c instanceof Number)this.numerator=c,this.denominator=1;else if("string"==typeof c||c instanceof String){var d,e,f=c.split(" ");if(f[0]&&(d=f[0]),f[1]&&(e=f[1]),d%1===0&&e&&e.match("/"))return new Fraction(d).add(new Fraction(e));if(!d||e)return;if(("string"==typeof d||d instanceof String)&&d.match("/")){var g=d.split("/");this.numerator=g[0],this.denominator=g[1]}else{if(("string"==typeof d||d instanceof String)&&d.match("."))return new Fraction(parseFloat(d.replace(",",".")));this.numerator=parseInt(d),this.denominator=1}}}this.normalize()};Fraction.prototype.clone=function(){return new Fraction(this.numerator,this.denominator)},Fraction.prototype.toString=function(){if(isNaN(this.denominator))return"NaN";var a="";this.numerator<0!=this.denominator<0&&(a="-");var b=Math.abs(this.numerator),c=Math.abs(this.denominator),d=Math.floor(b/c);return b%=c,0!=d&&(a+=d),0!=b&&(0!=d&&(a+=" "),a+=b+"/"+c),a.length>0?a:"0"},Fraction.prototype.toTeX=function(a){if(isNaN(this.denominator))return"NaN";var b="";this.numerator<0!=this.denominator<0&&(b="-");var c=Math.abs(this.numerator),d=Math.abs(this.denominator);if(!a)return 1===d?b+c:b+"\\frac{"+c+"}{"+d+"}";var e=Math.floor(c/d);return c%=d,0!=e&&(b+=e),0!=c&&(b+="\\frac{"+c+"}{"+d+"}"),b.length>0?b:"0"},Fraction.prototype.rescale=function(a){return this.numerator*=a,this.denominator*=a,this},Fraction.prototype.add=function(a){var b=this.clone();a=a instanceof Fraction?a.clone():new Fraction(a);var c=b.denominator;return b.rescale(a.denominator),b.numerator+=a.numerator*c,b.normalize()},Fraction.prototype.subtract=function(a){var b=this.clone();a=a instanceof Fraction?a.clone():new Fraction(a);var c=b.denominator;return b.rescale(a.denominator),b.numerator-=a.numerator*c,b.normalize()},Fraction.prototype.multiply=function(a){var b=this.clone();if(a instanceof Fraction)b.numerator*=a.numerator,b.denominator*=a.denominator;else{if("number"!=typeof a)return b.multiply(new Fraction(a));b.numerator*=a}return b.normalize()},Fraction.prototype.divide=function(a){var b=this.clone();if(a instanceof Fraction)b.numerator*=a.denominator,b.denominator*=a.numerator;else{if("number"!=typeof a)return b.divide(new Fraction(a));b.denominator*=a}return b.normalize()},Fraction.prototype.equals=function(a){a instanceof Fraction||(a=new Fraction(a));var b=this.clone().normalize(),a=a.clone().normalize();return b.numerator===a.numerator&&b.denominator===a.denominator},Fraction.prototype.normalize=function(){var a=function(a){return"number"==typeof a&&(a>0&&a%1>0&&a%1<1||a<0&&a%-1<0&&a%-1>-1)},b=function(a,b){if(b){var c=Math.pow(10,b);return Math.round(a*c)/c}return Math.round(a)};return function(){if(a(this.denominator)){var c=b(this.denominator,9),d=Math.pow(10,c.toString().split(".")[1].length);this.denominator=Math.round(this.denominator*d),this.numerator*=d}if(a(this.numerator)){var c=b(this.numerator,9),d=Math.pow(10,c.toString().split(".")[1].length);this.numerator=Math.round(this.numerator*d),this.denominator*=d}var e=Fraction.gcf(this.numerator,this.denominator);return this.numerator/=e,this.denominator/=e,this.denominator<0&&(this.numerator*=-1,this.denominator*=-1),this}}(),Fraction.gcf=function(a,b){if(arguments.length<2)return a;var c;for(a=Math.abs(a),b=Math.abs(b);b;)c=a%b,a=b,b=c;return a},Fraction.primeFactors=function(a){for(var b=Math.abs(a),c=[],d=2;d*d<=b;)b%d===0?(c.push(d),b/=d):d++;return 1!=b&&c.push(b),c},Fraction.prototype.snap=function(a,b){b||(b=1e-4),a||(a=100);for(var c=this.numerator<0,d=this.numerator/this.denominator,e=Math.abs(d%1),f=c?Math.ceil(d):Math.floor(d),g=1;g<=a;++g)for(var h=0;h<=a;++h){var i=Math.abs(h/g);if(Math.abs(i-e)<b)return new Fraction(f*g+h*(c?-1:1),g)}return new Fraction(this.numerator,this.denominator)},"undefined"!=typeof module&&(module.exports.Fraction=Fraction);